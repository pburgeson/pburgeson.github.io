<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Stepper Driver Testing | Your awesome title</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Stepper Driver Testing" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s been many years since I drove a stepper motor from an arduino. In order to get back into the saddle, I made a simple arduino sketch for making a motor rotate. The goal is to simply have the arduino get a stepper motor to drive using the step and direction pins on a silent step stick with a TMC2208 from trinamic on it. The trinamic stepper motor drives are a project requirement." />
<meta property="og:description" content="It’s been many years since I drove a stepper motor from an arduino. In order to get back into the saddle, I made a simple arduino sketch for making a motor rotate. The goal is to simply have the arduino get a stepper motor to drive using the step and direction pins on a silent step stick with a TMC2208 from trinamic on it. The trinamic stepper motor drives are a project requirement." />
<link rel="canonical" href="/archive/2020/06/25/Stepper-Driver-Testing.html" />
<meta property="og:url" content="/archive/2020/06/25/Stepper-Driver-Testing.html" />
<meta property="og:site_name" content="Your awesome title" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-25T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Stepper Driver Testing" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"/archive/2020/06/25/Stepper-Driver-Testing.html","headline":"Stepper Driver Testing","dateModified":"2020-06-25T00:00:00-04:00","datePublished":"2020-06-25T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"/archive/2020/06/25/Stepper-Driver-Testing.html"},"description":"It’s been many years since I drove a stepper motor from an arduino. In order to get back into the saddle, I made a simple arduino sketch for making a motor rotate. The goal is to simply have the arduino get a stepper motor to drive using the step and direction pins on a silent step stick with a TMC2208 from trinamic on it. The trinamic stepper motor drives are a project requirement.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Your awesome title" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Your awesome title</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/archive/cycloidaldrive/">Cycloidal Drive</a><a class="page-link" href="/archive/blog/">Paul Burgeson&#39;s Blog</a><a class="page-link" href="/archive/minifalcon9/">Mini Falcon 9</a><a class="page-link" href="/archive/resume/">Resume</a><a class="page-link" href="/archive/">Paul Burgeson</a><a class="page-link" href="/archive/diy_glass/">DIY Glass</a><a class="page-link" href="/archive/cablecnc/">Cable CNC</a><a class="page-link" href="/archive/3dscanner/">3D Scanner</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Stepper Driver Testing</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-06-25T00:00:00-04:00" itemprop="datePublished">Jun 25, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>It’s been many years since I drove a stepper motor from an arduino.  In order to get back into the saddle, I made a simple arduino sketch for making a motor rotate.  The goal is to simply have the arduino get a stepper motor to drive using the step and direction pins on a silent step stick with a TMC2208 from trinamic on it.  The trinamic stepper motor drives are a project requirement.</p>

<p>The sketch can be found in the software folder in my github for the project.  the first sketch was just using arduino delays to manually drive the step pin high and low.  It seemed to work but the motor would randomly stutter.  I started with a 12 V wall wart style power supply.  I connected the step pin to my newly acquired oscilloscope to see if the step or enable pins were stuttering.  They were not.  I thought the issue might be the 12V so I connected the trinamic driver up to my adjustable power supply at 12V.  I found the higher the voltage, the more current the trinamic stepper was sinking.  This caused the stepper driver to heat up which led to a thermal shutdown.  this was the root of the stuttering.  I dont yet understand why this is the case as the trinamic driver is good well above 12V.  I’ll have to dig into the documentation further.  The optiminal seemed around 6 V.  Less and the stepper couldn’t drive at all.  More and extra current was being sunk by the driver.</p>

<p>Now that the stepper driver was driving the stepper motor, I turned my attention to getting the accelstepper library to drive the motor.  this is critical as the software for the scanner relies on it.  After a few missteps and extra documentation reading I got it working.  The issue I was seeing was that the steps would be coming out of the arduino, but the enable pin was not going active.  The trinamic driver is active low so a simple comfiguration change to the stepper object to invert the logic on the enable pin and everything worked wonderfully.</p>

<p><img src="../../../assets/3dscanner/stepper_driver_test_1.jpg" alt="Stepper Driver Testing 1" />
<img src="../../../assets/3dscanner/stepper_driver_test_2.jpg" alt="Stepper Driver Testing 2" />
<img src="../../../assets/3dscanner/stepper_driver_test_3.jpg" alt="Stepper Driver Testing 3" /></p>

  </div><a class="u-url" href="/archive/2020/06/25/Stepper-Driver-Testing.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Your awesome title</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Your awesome title</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
